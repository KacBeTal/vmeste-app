<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–ú–µ—Å—Ç–µ | –û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏</title>
    
    <!-- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è OK.ru -->
    <script src="https://connect.ok.ru/connect.js" type="text/javascript" charset="UTF-8"></script>
    
    <!-- –í–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        /* –°–∫—Ä—ã–≤–∞–µ–º scrollbar –≤ iframe OK.ru */
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        /* OK.ru —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è iframe */
        .ok-frame {
            width: 100%;
            min-height: 100vh;
            background: white;
        }
    </style>
</head>
<body class="ok-frame">
    <div id="app">
        <div class="container">
            <h1>üåä –í–ú–µ—Å—Ç–µ</h1>
            <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤ —á–µ—Ä–µ–∑ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ—Å–ª–∞–Ω–∏—è</p>
            
            <div id="auth-section">
                <button id="ok-login-btn" class="ok-button">
                    –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏
                </button>
            </div>
            
            <div id="content" style="display: none;">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
            </div>
            
            <div id="status"></div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OK API -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ iframe OK.ru
        const isInOKFrame = window.location !== window.parent.location;
        
        if (isInOKFrame) {
            console.log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ OK.ru iframe');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º OK API –∫–æ–≥–¥–∞ DOM –∑–∞–≥—Ä—É–∂–µ–Ω
            document.addEventListener('DOMContentLoaded', function() {
                try {
                    // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è OK.ru
                    OK.init({
                        appId: '512004353381',
                        appKey: '–ù–£–ñ–ï–ù_–ü–£–ë–õ–ò–ß–ù–´–ô_–ö–õ–Æ–ß', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π
                        callback: window.location.origin,
                        scope: 'VALUABLE'
                    });
                    
                    console.log('‚úÖ OK API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
                    document.getElementById('ok-login-btn').style.display = 'block';
                    
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OK API:', error);
                    document.getElementById('status').innerHTML = 
                        '<p style="color:red">–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OK API. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Console.</p>';
                }
            });
        }
    </script>
</body>
</html>
