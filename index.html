<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–ú–µ—Å—Ç–µ –¥–ª—è OK.ru</title>
    
    <!-- –†–∞–∑—Ä–µ—à–∞–µ–º iframe -->
    <meta http-equiv="Content-Security-Policy" 
          content="frame-ancestors 'self' https://ok.ru https://*.ok.ru;">
    
    <!-- SDK OK.ru -->
    <script type="text/javascript" src="//api.ok.ru/js/fapi5.js" defer="defer"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            background: rgba(255,255,255,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåä –í–ú–µ—Å—Ç–µ</h1>
        <p>–¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è OK.ru</p>
        
        <div id="status" class="status">
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</p>
            <p>–î–æ–º–µ–Ω: <span id="domain"></span></p>
            <p>–í iframe: <span id="iframe-status"></span></p>
        </div>
        
        <div id="content"></div>
    </div>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        document.getElementById('domain').textContent = window.location.hostname;
        document.getElementById('iframe-status').textContent = 
            (window.self !== window.top) ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º OK.ru SDK
        setTimeout(() => {
            if (typeof FAPI !== 'undefined') {
                document.getElementById('status').innerHTML += 
                    '<p>‚úÖ SDK OK.ru –∑–∞–≥—Ä—É–∂–µ–Ω</p>';
                
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                var rParams = FAPI.Util.getRequestParameters();
                if (rParams && rParams.api_server) {
                    document.getElementById('content').innerHTML = 
                        '<h3>‚úÖ OK.ru iframe —Ä–∞–±–æ—Ç–∞–µ—Ç!</h3>' +
                        '<p>API —Å–µ—Ä–≤–µ—Ä: ' + rParams.api_server + '</p>' +
                        '<button onclick="testOKAuth()">–¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</button>';
                }
            } else {
                document.getElementById('status').innerHTML += 
                    '<p style="color:#ff6b6b">‚ùå SDK OK.ru –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</p>';
            }
        }, 2000);
        
        function testOKAuth() {
            alert('OK API —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!');
        }
    </script>
</body>
</html>
