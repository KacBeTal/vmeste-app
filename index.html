<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–ú–µ—Å—Ç–µ | –û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏</title>
    
    <!-- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: FAPI5 SDK –¥–ª—è OK.ru -->
    <script type="text/javascript" src="//api.ok.ru/js/fapi5.js" defer="defer"></script>
    
    <!-- –í–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        body {
            margin: 0;
            padding: 15px;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        h1 {
            color: #ed812b;
            text-align: center;
        }
        
        .ok-button {
            background: #ed812b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <h1>üåä –í–ú–µ—Å—Ç–µ</h1>
        <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤ —á–µ—Ä–µ–∑ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ—Å–ª–∞–Ω–∏—è</p>
        
        <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ OK API...</div>
        
        <div id="auth-section" style="display: none;">
            <button onclick="loginWithOK()" class="ok-button">
                –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏
            </button>
        </div>
        
        <div id="content" style="display: none;">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div id="status"></div>
    </div>

    <script src="app.js"></script>
    <script>
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –µ—Å–ª–∏ –º—ã –≤ iframe
if (window.self !== window.top) {
    console.log('–ú—ã –≤ iframe! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ OK.ru');
    
    // –ï—Å–ª–∏ –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ URL, –ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏—Ö
    if (!window.location.search.includes('apiconnection')) {
        // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞
        try {
            window.parent.postMessage({ type: 'get_ok_params' }, '*');
        } catch (e) {
            console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –æ–∫–Ω–æ–º');
        }
    }
}
</script>
</body>
</html>
